import java.nio.file.Files
import java.nio.file.StandardCopyOption

version = "$echo"

def testV1SwaggerFilePath = Files.createTempFile('echo.test.v1.yml', null)

task downloadSwaggerFiles {
    doLast {
        Files.copy(
                new URL('http://connector.artifact.dev.electrica.io/echo/swagger/test.v1.yml').openStream(),
                testV1SwaggerFilePath,
                StandardCopyOption.REPLACE_EXISTING
        )
    }
}
generateSwaggerCode.dependsOn downloadSwaggerFiles

swaggerSources {
    testV1 {
        code {
            inputFile = testV1SwaggerFilePath.toFile()
            language = 'java'
            configFile = file('./swagger/test.v1.json')
            outputDir = file("$buildDir/swagger-code")
            components = ['models']
            wipeOutputDir = false
        }
    }
}
